(()=>{"use strict";var t={p:""};class e{constructor(t){this.header=t,this.headerLogoBox=this.header.querySelector(".header-logo-box"),this.headerNavBox=this.header.querySelector(".header-nav-box"),this.headerButtonBox=this.header.querySelector(".header-button-box")}}const a=t.p+"52aa3ac5eaa368e5313f.jpg",i=t.p+"78378da4a3407fa03231.jpg",o=t.p+"985bbdc01d707526fcce.jpg";class s{constructor(t){this.preview=t,this.nameList=this.preview.querySelector(".tabheader-list"),this.namesArr=[...this.nameList.querySelectorAll(".tabheader-item")],this.content=this.preview.querySelector(".tabcontent"),this.contentIMG=this.content.querySelector(".tabcontent-img"),this.contentDescr=this.content.querySelector(".tabcontent-descr"),this.prevData=[{name:"Фитнес",img:{src:a,alt:"vegy"},descr:'Меню "Фитнес" - это новый подход к приготовлению блюд: больше свежих овощей и фруктов. Для людей, которые интересуются спортом; активных и здоровых. Это абсолютно новый продукт с оптимальной ценой и высоким качеством!'},{name:"Премиум",img:{src:i,alt:"elite"},descr:"Меню “Премиум” - мы используем не только красивый дизайн упаковки, но и качественное исполнение блюд. Красная рыба, морепродукты, фрукты - ресторанное меню без похода в ресторан!"},{name:"Постное",img:{src:o,alt:"post"},descr:"Наше специальное “Постное меню” - это тщательный подбор ингредиентов: полное отсутствие продуктов животного происхождения. Полная гармония с собой и природой в каждом элементе! Все будет ОK!"},{name:"Сбалансированное",img:{src:a,alt:"vegy"},descr:'Меню "Сбалансированное" - это соответствие вашего рациона всем научным рекомендациям. Мы тщательно просчитываем вашу потребность в к/б/ж/у и создаем лучшие блюда для вас.'}]}findPreviewDataIndex(t){return!!this.prevData.find((e=>{let{name:a}=e;return a.toLowerCase()===t.toLowerCase()}))&&this.prevData.findIndex((e=>{let{name:a}=e;return a.toLowerCase()===t.toLowerCase()}))}changePreviewData(t,e){const a=this.findPreviewDataIndex(e);this.contentIMG.src=this.prevData[a].img.src,this.contentIMG.alt=this.prevData[a].img.alt,this.contentDescr.textContent=this.prevData[a].descr,this.namesArr.forEach((t=>{t.classList.remove("tabheader-item-active")})),this.content.classList.add("fade"),t.classList.add("tabheader-item-active"),setTimeout((()=>{this.content.classList.remove("fade")}),1e3)}previewControl(){this.preview.addEventListener("click",(t=>{if(this.target=t.target,this.target.closest(".tabheader-item")){if(t.preventDefault(),this.target.classList.contains("tabheader-item-active"))return;const e=this.target.textContent;this.changePreviewData(this.target,e)}}))}}class r{constructor(t,e){this.offer=t,this.utils=e,this.offerAdvantages=this.offer.querySelector(".offer-advantages"),this.offerHeaders=[...this.offerAdvantages.querySelectorAll(".offer-advantages-heading")],this.offerparagraphs=[...this.offerAdvantages.querySelectorAll(".offer-advantages-paragraph")],this.offerSlider=this.offer.querySelector(".offer-slider"),this.offerSliderCounter=this.offerSlider.querySelector(".offer-slider-counter"),this.current=this.offerSliderCounter.querySelector(".offer-slider-current"),this.offerSliderWrapper=this.offerSlider.querySelector(".offer-slider-wrapper"),this.offerSliderIMG=this.offerSliderWrapper.querySelector(".offer-slide-img")}changeOfferSliderCounter(t){let e=null;t.classList.contains("offer-slider-arrow-prev")?e=parseInt(this.current.textContent,10)-1:t.classList.contains("offer-slider-arrow-next")&&(e=parseInt(this.current.textContent,10)+1),e<1?e=4:e>4&&(e=1),this.offerSliderIMG.src=this.utils.offerData[e-1].img.src,this.offerSliderIMG.alt=this.utils.offerData[e-1].img.alt,this.current.textContent=`0${e}`}offerControl(){this.offer.addEventListener("click",(t=>{this.target=t.target,this.target.closest(".offer-slider-arrow")&&(t.preventDefault(),this.changeOfferSliderCounter(this.target))}))}}class n{constructor(t){this.calculating=t,this.calculatingField=this.calculating.querySelector(".calculating-field"),this.genderBox=this.calculatingField.querySelector(".calculating-gender-box"),this.paramsBox=this.calculatingField.querySelector(".calculating-params-box"),this.activBox=this.calculatingField.querySelector(".calculating-activ-box"),this.totalBox=this.calculatingField.querySelector(".calculating-total-box"),this.gender=this.genderBox.querySelector(".calculating-gender-box-content"),this.params=this.paramsBox.querySelector(".calculating-params-box-content"),this.activ=this.activBox.querySelector(".calculating-activ-box-content"),this.total=this.totalBox.querySelector(".calculating-total-box-content"),this.calculatingForm=this.params.querySelector(".calculating-form")}changeCalculatingItem(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[...t.closest(".calculating-box-content").querySelectorAll(".calculating-item")];this.item=t,e.forEach((t=>{t.classList.remove("calculating-item-active")})),this.item.classList.add("calculating-item-active")}calculatingControl(){this.calculating.addEventListener("click",(t=>{if(this.target=t.target,this.target.closest(".calculating-item")){if(t.preventDefault(),this.target.classList.contains("calculating-item-active"))return;this.changeCalculatingItem(this.target)}}))}}class l{constructor(t,e){this.menu=t,this.utils=e,this.menuList=this.menu.querySelector(".menu-list"),this.transfer=60,this.card=null}getMenuCard(t){const e=document.createElement("li");e.classList.add("menu-item",`menu-item-${t.name}`);const a=document.createElement("div");a.classList.add("menu-item-picture");const i=document.createElement("img");i.classList.add("menu-item-img"),i.setAttribute("src",t.img.src),i.setAttribute("alt",t.img.alt);const o=document.createElement("h3");o.classList.add("menu-item-heading"),o.textContent=t.heading;const s=document.createElement("p");s.classList.add("menu-item-paragraph"),s.textContent=t.paragraph;const r=document.createElement("div");r.classList.add("menu-item-divider");const n=document.createElement("div");n.classList.add("menu-item-price");const l=document.createElement("div");l.classList.add("menu-item-cost"),l.textContent="Цена:";const c=document.createElement("div");c.classList.add("menu-item-total"),c.textContent=" руб/день";const h=document.createElement("span");return h.classList.add("menu-item-sum"),h.textContent=t.price*this.transfer,c.prepend(h),a.append(i),n.append(l),n.append(c),e.append(a),e.append(o),e.append(s),e.append(r),e.append(n),this.card=e,this.card}getMenuList(t){t.forEach((t=>this.menuList.append(this.getMenuCard(t))))}menuControl(){this.getMenuList(this.utils.menuData);this.menu.addEventListener("click",(t=>{this.target=t.target}))}}class c{constructor(t){this.order=t,this.orderForm=this.order.querySelector(".order-form")}orderControl(){this.order.addEventListener("click",(t=>{this.target=t.target}))}}class h{constructor(t){this.promotion=t,this.promotionText=this.promotion.querySelector(".promotion-text"),this.promotionTimer=this.promotion.querySelector(".promotion-timer"),this.promotionTimerContent=this.promotionTimer.querySelector(".promotion-timer-content"),this.promotionDays=this.promotionTimerContent.querySelector(".promotion-days"),this.promotionHours=this.promotionTimerContent.querySelector(".promotion-hours"),this.promotionMinutes=this.promotionTimerContent.querySelector(".promotion-minutes"),this.promotionSeconds=this.promotionTimerContent.querySelector(".promotion-seconds"),this.deadline="2023-02-20"}getTimeRemaining(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.parse(this.deadline)-Date.parse(new Date);return{total:t,dais:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60)}}showTimer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getTimeRemaining();const e=t;for(const a in e)if(Object.hasOwnProperty.call(e,a)){const i=t[a];e[a]=i<10?`0${i}`:i}this.promotionDays.textContent=t.dais,this.promotionHours.textContent=t.hours,this.promotionMinutes.textContent=t.minutes,this.promotionSeconds.textContent=t.seconds}getTimeInterval(){const t=setInterval((()=>{const e=this.getTimeRemaining();this.showTimer(),e.total<=0&&clearInterval(t)}),1e3)}promotionControl(){this.showTimer(),this.getTimeInterval()}}class d{constructor(t){this.modal=t,this.modalForm=this.modal.querySelector(".modal-form"),this.modalNameInput=this.modalForm.querySelector(".modal-name-input"),this.modalPhoneInput=this.modalForm.querySelector(".modal-phone-input"),this.modalGenderInput=this.modalForm.querySelector(".modal-gender-input"),this.modalHeightInput=this.modalForm.querySelector(".modal-height-input"),this.modalWeightInput=this.modalForm.querySelector(".modal-weight-input"),this.modalAgeInput=this.modalForm.querySelector(".modal-age-input"),this.modalActivInput=this.modalForm.querySelector(".modal-activ-input")}showModal(t,e,a,i,o,s,r){this.modalNameInput.value=t,this.modalPhoneInput.value=e,this.modalGenderInput.value=a,this.modalHeightInput.value=i,this.modalWeightInput.value=o,this.modalAgeInput.value=s,this.modalActivInput.value=r,this.modal.classList.toggle("hidden"),document.body.style.overflow="hidden",clearTimeout(this.modalTimerId)}closeModal(){this.modal.classList.toggle("hidden"),document.body.style.overflow="",this.modalForm.reset()}modalControl(){this.modal.addEventListener("click",(t=>{this.target=t.target,(this.target.closest(".modal-close")||this.target.classList.contains("modal"))&&(t.preventDefault(),this.closeModal())}));document.addEventListener("keydown",(t=>{this.target=t.target,this.modal.classList.contains("hidden")||"Escape"!==t.code||(t.preventDefault(),this.closeModal())}))}}const u=t.p+"cd58eaa2f30687a5c552.jpg",m=t.p+"7e960dab4558feddaa80.jpg",g=t.p+"1151f2a024c05323b134.jpg",p=t.p+"0cc3f1aa75805905d8a7.jpg";class f{constructor(){this.menuData=[{name:"fitness",img:{src:a,alt:"fitness"},heading:'Меню "Фитнес"',paragraph:'Меню "Фитнес" - это новый подход к приготовлению блюд: больше свежих овощей и фруктов. Продукт активных и здоровых людей. Это абсолютно новый продукт с оптимальной ценой и высоким качеством!',price:20},{name:"elite",img:{src:i,alt:"elite"},heading:"Меню “Премиум”",paragraph:"В меню “Премиум” мы используем не только красивый дизайн упаковки, но и качественное исполнение блюд. Красная рыба, морепродукты, фрукты - ресторанное меню без похода в ресторан!",price:25},{name:"post",img:{src:o,alt:"post"},heading:'Меню "Постное"',paragraph:"Меню “Постное” - это тщательный подбор ингредиентов: полное отсутствие продуктов животного происхождения, молоко из миндаля, овса, кокоса или гречки, правильное количество белков за счет тофу и импортных вегетарианских стейков.",price:17}],this.offerData=[{name:"pepper",img:{src:u,alt:"pepper"}},{name:"food",img:{src:m,alt:"food"}},{name:"oil",img:{src:g,alt:"oil"}},{name:"paprika",img:{src:p,alt:"paprika"}}],this.messages={loading:"Loading...",success:"Success!",error:"Error!"}}}class v{constructor(t){this.url=t,this.contentTypeHeader={"Content-Type":"application/json;charset=utf-8"},this.urlContactData=`${this.url}contactData`,this.urlFoodData=`${this.url}foodData`,this.getReq="GET",this.postReq="POST",this.deleteReq="DELETE",this.putReq="PUT",this.needData=null}async getData(t){const e=await fetch(`${t}`);return e.status>=200&&e.status<300?(this.needData=await e.json(),this.needData):`ERROR!!, ${await e.json()}, ${e.status}`}async addUser(t,e){const a={name:t.get("modalName").trim(),phone:t.get("modalPhone").trim(),gender:t.get("modalGender").trim(),height:t.get("modalHeight").trim(),weight:t.get("modalWeight").trim(),age:t.get("modalAge").trim(),activ:t.get("modalActiv").trim()},i=await fetch(e,{method:this.postReq,headers:this.contentTypeHeader,body:JSON.stringify(a)});return i.status>=200&&i.status<300?(this.needData=await i.json(),this.needData):`ERROR!!, ${await i.json()}, ${i.status}`}async getDataByID(t,e){const a=await fetch(`${t}/${e}`);return a.status>=200&&a.status<300?(this.needData=await a.json(),this.needData):`ERROR!!, ${await a.json()}, ${a.status}`}async deleteDataByID(t,e){const a=await fetch(`${t}/${e}`,{method:this.deleteReq,headers:this.contentTypeHeader});return a.status>=200&&a.status<300?(this.needData=await a.json(),this.needData):`ERROR!!, ${await a.json()}, ${a.status}`}async projectFoodRequestControl(){console.log(await this.getData(this.urlContactData))}}class y{constructor(t,e,a,i,o,s,r,n,l,c){this.box=t,this.header=e,this.preview=a,this.offer=i,this.calculating=o,this.menu=s,this.order=r,this.promotion=n,this.modal=l,this.request=c,this.userName=this.order.orderForm.querySelector(".order-name-input"),this.userPhone=this.order.orderForm.querySelector(".order-phone-input"),this.userGender=this.calculating.gender.querySelector(".calculating-item-active"),this.userHeight=this.calculating.calculatingForm.querySelector("#height"),this.userWeight=this.calculating.calculatingForm.querySelector("#weight"),this.userAge=this.calculating.calculatingForm.querySelector("#age"),this.userActiv=this.calculating.activ.querySelector(".calculating-item-active")}async postUserData(t){const e=new FormData(t),a=await this.request.addUser(e,this.request.urlContactData);console.log(a),this.modal.closeModal()}projectFoodControl(){this.preview.previewControl(),this.offer.offerControl(),this.calculating.calculatingControl(),this.menu.menuControl(),this.order.orderControl(),this.promotion.promotionControl(),this.modal.modalControl(),this.request.projectFoodRequestControl();this.box.addEventListener("click",(t=>{if(this.target=t.target,this.target.closest("[data-modal]")){t.preventDefault();const e=this.userName.value,a=this.userPhone.value,i=this.calculating.gender.querySelector(".calculating-item-active").textContent,o=this.userHeight.value,s=this.userWeight.value,r=this.userAge.value,n=this.calculating.activ.querySelector(".calculating-item-active").textContent;this.modal.showModal(e,a,i,o,s,r,n)}if(this.target.closest(".modal-button")){t.preventDefault();const e=this.target.closest(".modal-form");this.postUserData(e)}}));const t=e=>{if(this.target=e.target,window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight){e.preventDefault();const a=this.userName.value,i=this.userPhone.value,o=this.calculating.gender.querySelector(".calculating-item-active").textContent,s=this.userHeight.value,r=this.userWeight.value,n=this.userAge.value,l=this.calculating.activ.querySelector(".calculating-item-active").textContent;this.modal.showModal(a,i,o,s,r,n,l),window.removeEventListener("scroll",t)}};window.addEventListener("scroll",t)}}window.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("header"),a=new e(t),i=document.getElementById("preview"),o=new s(i),u=new f,m=document.getElementById("offer"),g=new r(m,u),p=document.getElementById("calculating"),S=new n(p),w=document.getElementById("menu"),q=new l(w,u),C=document.getElementById("order"),D=new c(C),x=document.getElementById("promotion"),L=new h(x),E=document.getElementById("modal"),I=new d(E),b=new v("http://localhost:7070/"),F=document.getElementById("projectContainer");new y(F,a,o,g,S,q,D,L,I,b).projectFoodControl()}))})();